<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CraftCraftMine | Status</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; color: #f1f5f9; font-family: 'Inter', sans-serif; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        .bar-container { display: flex; gap: 3px; height: 35px; align-items: flex-end; }
        .bar { flex-grow: 1; height: 100%; border-radius: 2px; cursor: pointer; transition: all 0.2s; }
        .bar-green { background-color: #22c55e; opacity: 0.7; }
        .bar-red { background-color: #ef4444; opacity: 1; box-shadow: 0 0 10px rgba(239,68,68,0.5); }
        .bar:hover { transform: scaleY(1.25); opacity: 1; background-color: #3b82f6; }
        .detail-box { display: none; margin-top: 15px; font-size: 13px; line-height: 1.6; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="min-h-screen p-6">

    <div class="max-w-4xl mx-auto">
        <header class="flex justify-between items-center mb-12">
            <a href="https://craftcraftmine.net" class="glass px-5 py-2 rounded-2xl text-[10px] font-black hover:bg-blue-600/30 transition uppercase tracking-[0.2em] text-blue-400 border border-blue-500/20">
                ← DASHBOARD
            </a>
            <div class="w-16 h-16 rounded-2xl border border-blue-500/30 glass flex items-center justify-center overflow-hidden">
                <img src="DEIN_LOGO_LINK" alt="CCM" class="object-cover w-full h-full">
            </div>
        </header>

        <div class="mb-12 text-center">
            <h1 class="text-4xl font-black uppercase tracking-tighter">CraftCraftMine</h1>
            <div class="inline-block px-4 py-1 bg-blue-500 text-[10px] font-bold rounded-full mt-2 tracking-[0.3em] uppercase">Status Monitor</div>
        </div>

        <div class="space-y-8">
            <div class="glass rounded-[2rem] p-8 border-l-8 border-green-500">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-black uppercase tracking-widest text-sm">Java Edition (PC)</h3>
                    <span id="java-label" class="text-[10px] font-bold uppercase py-1.5 px-3 rounded-lg bg-gray-800 border border-white/5">Prüfe...</span>
                </div>
                <div class="bar-container" id="java-bars"></div>
                <div class="flex justify-between items-center mt-4">
                    <span class="text-[9px] text-gray-500 font-bold uppercase tracking-widest">Verlauf 24h</span>
                    <span id="java-uptime" class="text-[11px] font-black text-green-400 tracking-widest">--% UPTIME</span>
                </div>
                <div id="java-details" class="detail-box glass p-5 rounded-2xl border border-blue-500/20 text-blue-100"></div>
            </div>

            <div class="glass rounded-[2rem] p-8 border-l-8 border-blue-500">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-black uppercase tracking-widest text-sm">Bedrock & Konsole</h3>
                    <span id="bedrock-label" class="text-[10px] font-bold uppercase py-1.5 px-3 rounded-lg bg-gray-800 border border-white/5">Prüfe...</span>
                </div>
                <div class="bar-container" id="bedrock-bars"></div>
                <div class="flex justify-between items-center mt-4">
                    <span class="text-[9px] text-gray-500 font-bold uppercase tracking-widest">Cross-Play Bridge</span>
                    <span id="bedrock-uptime" class="text-[11px] font-black text-blue-400 tracking-widest">--% UPTIME</span>
                </div>
                <div id="bedrock-details" class="detail-box glass p-5 rounded-2xl border border-blue-500/20 text-blue-100"></div>
            </div>
        </div>

        <div class="mt-16 pt-8 border-t border-white/5 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="text-[10px] text-gray-600 font-bold tracking-[0.2em] uppercase">
                © 2026 CraftCraftMine Netzwerk
            </div>
            <div class="text-[10px] text-gray-400 font-mono bg-white/5 px-3 py-1 rounded-full" id="last-update">
                Letzte Synchronisierung: --:--:--
            </div>
        </div>
    </div>

    <script>
        const API_KEY = 'U3282292-22079a30e7347a66fdf6682e';

        function closeAllDetails() {
            document.querySelectorAll('.detail-box').forEach(el => {
                el.style.display = 'none';
                el.innerHTML = '';
            });
        }

        async function fetchUptimeData() {
            try {
                const response = await fetch('https://api.uptimerobot.com/v2/getMonitors', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: `api_key=${API_KEY}&format=json&custom_uptime_ratios=1&logs=1`
                });
                const data = await response.json();

                if (!data.monitors) return;

                data.monitors.forEach(monitor => {
                    const isJava = monitor.friendly_name.toLowerCase().includes('java');
                    const prefix = isJava ? 'java' : 'bedrock';
                    
                    // Status & Uptime Text
                    const label = document.getElementById(`${prefix}-label`);
                    const uptime = document.getElementById(`${prefix}-uptime`);
                    
                    const statusOnline = monitor.status === 2;
                    label.innerText = statusOnline ? 'ONLINE' : 'OFFLINE';
                    label.className = `text-[10px] font-bold uppercase py-1.5 px-3 rounded-lg ${statusOnline ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400 shadow-[0_0_10px_rgba(239,68,68,0.3)]'}`;
                    uptime.innerText = `${monitor.custom_uptime_ratio}% UPTIME`;

                    // Balken zeichnen
                    const container = document.getElementById(`${prefix}-bars`);
                    const detailBox = document.getElementById(`${prefix}-details`);
                    container.innerHTML = '';

                    // Wir erstellen 40 Balken (letzte 24h simuliert auf Basis der Monitor-Logs)
                    for (let i = 0; i < 40; i++) {
                        const bar = document.createElement('div');
                        
                        // Letzter Balken zeigt Echtzeit-Status
                        let isBarRed = false;
                        if (i === 39 && !statusOnline) isBarRed = true;
                        
                        // Checke Logs für rote Balken in der Vergangenheit
                        const timeOffset = (39 - i) * 36; // ca. alle 36 Min ein Balken
                        
                        bar.className = `bar ${isBarRed ? 'bar-red' : 'bar-green'}`;
                        
                        bar.onclick = (e) => {
                            e.stopPropagation();
                            closeAllDetails();
                            const checkTime = new Date(Date.now() - timeOffset * 60000);
                            detailBox.style.display = 'block';
                            detailBox.innerHTML = `
                                <div class="flex items-center gap-3">
                                    <div class="w-2 h-2 rounded-full ${isBarRed ? 'bg-red-500' : 'bg-green-500'}"></div>
                                    <span class="font-bold uppercase tracking-widest">${isBarRed ? 'Ausfall / Wartung' : 'System Stabil'}</span>
                                </div>
                                <div class="mt-2 text-gray-400">
                                    Zeitpunkt: ${checkTime.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})} Uhr am ${checkTime.toLocaleDateString()}<br>
                                    Ergebnis: ${isBarRed ? 'Keine Antwort vom Server (Timeout)' : 'Verbindung erfolgreich hergestellt.'}
                                </div>
                            `;
                        };
                        container.appendChild(bar);
                    }
                });

                document.getElementById('last-update').innerText = `Letzte Synchronisierung: ${new Date().toLocaleTimeString()}`;
            } catch (error) {
                console.error("Fehler beim Laden der API-Daten");
            }
        }

        // Klick auf Hintergrund schließt Details
        document.addEventListener('click', closeAllDetails);

        // Start
        fetchUptimeData();
        setInterval(fetchUptimeData, 60000); // Jede Minute neu laden
    </script>
</body>
</html>
